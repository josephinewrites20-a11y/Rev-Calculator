<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Stuf — Ancillary Revenue Calculator</title>

<!-- jsPDF and AutoTable -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>

<style>
  :root{--stuf-purple:#5e3db3;--bg:#f6f7fb;}
  body{margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:#111827;padding:28px}
  .card{max-width:720px;margin:28px auto;background:#fff;border-radius:12px;padding:26px;box-shadow:0 8px 30px rgba(16,24,40,0.06)}
  h1{margin:0;font-size:20px;color:var(--stuf-purple)}
  label{display:block;font-weight:600;margin-top:12px}
  input,select{width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;margin-top:6px}
  .button{padding:12px 16px;border-radius:10px;border:none;background:var(--stuf-purple);color:#fff;cursor:pointer;font-weight:700;margin-top:14px;width:100%}
  .button.secondary{background:#111827}
  .results{margin-top:20px;padding:16px;border-radius:10px;background:#fbfbff}
  .result-row{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee}
  .pixel{letter-spacing:2px;color:#111827;display:inline-block}
  .pixel.flicker{animation:flicker .9s infinite}
  @keyframes flicker{0%,100%{opacity:.9}50%{opacity:.5}}
  .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:220}
  .modal{background:#fff;padding:20px;border-radius:12px;min-width:320px;box-shadow:0 8px 30px rgba(2,6,23,0.2);text-align:center}
  .hidden{display:none}
</style>
</head>
<body>
  <div class="card">
    <h1>Stuf Storage Ancillary Revenue Calculator</h1>
    <p>Enter property details below. Results are blurred until you enter your email to unlock the full report.</p>

    <label>Available Space (sq. ft.)</label>
    <input id="inputSpace" type="number" placeholder="e.g. 10000">

    <label>Property type</label>
    <select id="inputType">
      <option>Office</option>
      <option>Multifamily</option>
      <option>Retail</option>
      <option>Mixed-use</option>
      <option>Industrial</option>
      <option>Hotel</option>
    </select>

    <label>Market</label>
    <select id="inputMarket">
      <option value="NY">New York</option>
      <option value="BOS">Boston</option>
      <option value="DC">Washington, D.C.</option>
      <option value="SF">San Francisco</option>
      <option value="LA">Los Angeles</option>
      <option value="ATL">Atlanta</option>
      <option value="SEA">Seattle</option>
    </select>

    <button class="button" id="btnCalc">Calculate</button>

    <div id="resultsCard" class="results hidden">
      <div class="result-row"><span>Storage SF (70%)</span><span id="valStorage" class="pixel">████</span></div>
      <div class="result-row"><span>Rent per SF</span><span id="valRent" class="pixel">██</span></div>
      <div class="result-row"><span>Monthly Revenue</span><span id="valMonthly" class="pixel">████</span></div>
      <div class="result-row"><span>Annual Revenue</span><span id="valAnnual" class="pixel">████</span></div>
    </div>

    <div id="actions" class="hidden">
      <button id="downloadBtn" class="button">Download My Report</button>
      <a href="https://www.stufstorage.com/contact" target="_blank"><button class="button secondary">Talk to Stuf</button></a>
    </div>
  </div>

  <!-- Email popup -->
  <div id="overlay" class="overlay">
    <div class="modal">
      <h3>Enter your email to generate your report</h3>
      <input id="emailInput" type="email" placeholder="you@company.com">
      <button id="submitEmail" class="button">Generate Report</button>
    </div>
  </div>

<script>
const EFFICIENCY = 0.7;
function rentForMarket(m){if(m==='NY')return 30;if(m==='ATL'||m==='SEA')return 15;return 20;}

const btnCalc=document.getElementById('btnCalc'),resultsCard=document.getElementById('resultsCard'),
valStorage=document.getElementById('valStorage'),valRent=document.getElementById('valRent'),
valMonthly=document.getElementById('valMonthly'),valAnnual=document.getElementById('valAnnual'),
overlay=document.getElementById('overlay'),submitEmail=document.getElementById('submitEmail'),
emailInput=document.getElementById('emailInput'),actions=document.getElementById('actions'),
downloadBtn=document.getElementById('downloadBtn');

let calcSnapshot=null;

btnCalc.addEventListener('click',()=>{
  const space=parseFloat(document.getElementById('inputSpace').value);
  const type=document.getElementById('inputType').value;
  const market=document.getElementById('inputMarket').value;
  if(!space){alert("Enter space");return}
  const rent=rentForMarket(market),storageSF=Math.round(space*EFFICIENCY),
  annual=Math.round(storageSF*rent),monthly=Math.round(annual/12);
  calcSnapshot={space,type,market,rent,storageSF,annual,monthly};
  resultsCard.classList.remove('hidden');
  [valStorage,valRent,valMonthly,valAnnual].forEach(el=>{el.textContent="████";el.classList.add('flicker')});
  setTimeout(()=>{overlay.style.display='flex'},3000);
});

submitEmail.addEventListener('click',()=>{
  if(!emailInput.value.includes('@')){alert("Enter valid email");return}
  overlay.style.display='none';
  valStorage.textContent=calcSnapshot.storageSF+" SF";
  valRent.textContent="$"+calcSnapshot.rent+"/SF";
  valMonthly.textContent="$"+calcSnapshot.monthly.toLocaleString();
  valAnnual.textContent="$"+calcSnapshot.annual.toLocaleString();
  [valStorage,valRent,valMonthly,valAnnual].forEach(el=>el.classList.remove('flicker'));
  actions.classList.remove('hidden');
});

downloadBtn.addEventListener('click',()=>{
  const {jsPDF}=window.jspdf;
  const doc=new jsPDF({unit:'pt',format:'a4'});
  const purple=[94,61,179];

  // Header
  doc.setFillColor(...purple);doc.rect(0,0,doc.internal.pageSize.getWidth(),60,'F');
  doc.setTextColor(255,255,255);doc.setFontSize(14);doc.setFont('helvetica','bold');
  doc.text("Landlord Revenue Report",doc.internal.pageSize.getWidth()/2,35,{align:'center'});
  let y=90;

  const section = (title, body) => {
    doc.setFont('helvetica','bold');doc.setFontSize(12);doc.setTextColor(0,0,0);
    doc.text(title,40,y);y+=8;
    doc.autoTable({
      startY:y+4,
      head:[['Field','Value']],
      body:body,
      theme:'grid',
      headStyles:{fillColor:purple,textColor:[255,255,255],halign:'left'},
      styles:{fontSize:10,cellPadding:5,valign:'middle'},
      margin:{left:40,right:40}
    });
    y=doc.lastAutoTable.finalY+20;
  };

  // Sections
  section("1. Property Information",[
    ['Property Type',calcSnapshot.type],
    ['Available Space',calcSnapshot.space.toLocaleString()+' SF'],
    ['Market',calcSnapshot.market]
  ]);

  section("2. Stuf Efficiency Adjustment",[
    ['Efficiency Rate','70%'],
    ['Storage SF',calcSnapshot.storageSF.toLocaleString()+' SF']
  ]);

  section("3. Rent Applied",[
    ['Market Rent per SF','$'+calcSnapshot.rent+'/SF']
  ]);

  section("4. Revenue Projections",[
    ['Estimated Monthly Revenue','$'+calcSnapshot.monthly.toLocaleString()],
    ['Estimated Annual Revenue','$'+calcSnapshot.annual.toLocaleString()]
  ]);

  // Closing text
  doc.setFont('helvetica','normal');doc.setFontSize(11);doc.setTextColor(50,50,50);
  const closing="Don’t let another six months slip by while that basement, that underused floor, or that back corner bleeds money. We’ve proven—again and again—that these “dead zones” can be turned into revenue machines with storage. The only question is: will you claim that income or keep watching it vanish?";
  doc.text(closing,40,y,{maxWidth:doc.internal.pageSize.getWidth()-80});

  doc.save("Stuf_Landlord_Report.pdf");
});
</script>
</body>
</html>
